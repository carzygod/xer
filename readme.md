# xer — Twitter / X 使用助手

> **状态**: 🚧 **设计与规格制定阶段**
>
> **xer** 是一个 Chrome 扩展，旨在成为你使用 X (Twitter) 时的“副驾驶”。它负责枯燥的工作（滚动、查找内容）并辅助进行创造性的工作（起草回复），但将最终的行动控制权交**你**手中。

---

## 1. 核心目标

### ✅ 目标 (Goals)
*   **自动发现**：自动打开指定页面（主页、列表、搜索）并将推文收集到“候选池”中。
*   **辅助互动**：按计划（例如每 60-300 秒）生成互动建议（点赞、回复、引用推文）。
*   **草稿生成**：根据上下文为你预先填充回复草稿，等待你批准。
*   **风险控制**：主动检测并拦截政治或敏感内容，防止不必要的卷入。
---

## 2. 功能概览

### 🧠 智能工作流
1.  **自动滚动与收集**：静默浏览你的信息流，建立一个有趣推文的队列。
2.  **调度器**：使用随机间隔模拟人类行为，减少“机器人特征”。
3.  **草稿撰写器**：使用可配置的模板（简短、友好、专业）创建中立、令人愉快的回复草稿。

### 🛡️ 安全与风险引擎
*   **内容分析**：扫描文本、作者资料和标签。
*   **风险分级**：
    *   `SAFE`（安全）：标准互动流程。
    *   `CAUTION`（警告）：需要用户二次确认。
    *   `BLOCKED`（拦截）：禁用对此推文的互动功能。
*   **隐私**：所有分析在本地进行。不发送数据到外部服务器。

### 🎮 侧边栏界面 (Side Panel)
*   **仪表盘**：显示运行状态、候选池大小和日志。
*   **行动卡片**：显示当前推文 + 建议行动 + 风险标签。
*   **控制**：[确认]、[跳过]、[拉黑作者]、[暂停]。

---

## 3. 用户体验

**设置**:
1.  安装扩展。
2.  配置你的“启动 URL”（例如 `https://x.com/home`）。
3.  设置你的安全阈值和互动限制（例如 “每天最多 50 个点赞”）。

**日常循环**:
1.  `xer` 打开 X 并开始收集。
2.  你在侧边栏看到通知/徽章。
3.  你打开面板并查看建议：
    *   *建议：回复“完全同意！👍”*
    *   *风险：无*
4.  你点击 **确认**。`xer` 输入回复并发送（或留给你点击发送）。

---

## 4. 技术架构 (MV3)

*   **技术栈**: TypeScript, Vite, React (可选)。
*   **存储**: `chrome.storage.local` 用于所有配置和日志。
*   **组件**:
    *   **Service Worker**: 中央大脑。管理调度器、状态机和数据存储。
    *   **Content Script**: “手”。读取 DOM 以提取推文，并在接收指令时执行点击/输入。
    *   **Side Panel**: “脸”。用于审查和配置的用户界面。

### 数据流
1.  `Content Script` 抓取推文 → 发送到 `Service Worker`。
2.  `Service Worker` 处理、过滤（安全检查）并将推文排队。
3.  `Scheduler` 触发事件 → `Service Worker` 选择候选推文 → 发送到 `Side Panel`。
4.  用户批准 → `Side Panel` 向 `Service Worker` 发送信号 → 命令 `Content Script` 执行。

---

## 5. 配置策略

配置通过兼容 JSON 的结构进行管理，允许精细控制：

```jsonc
{
  // 启动
  "startUrls": ["https://x.com/home"],
  "autoOpenOnStart": true,

  // 计时（随机范围）
  "scrollIntervalSec": [10, 30],
  "suggestIntervalSec": [60, 300],

  // 安全
  "politicsRisk": {
    "mode": "balanced", // strict (严格), balanced (平衡), loose (宽松)
    "blockedKeywords": ["election", "war", "policy"]
  },

  // 限制
  "dailyLimits": {
    "like": 50,
    "reply": 20
  },

  // 个性
  "replyStyle": "friendly" // short (简短), professional (专业), emoji (表情符号)
}
```

---

## 6. 路线图

*   **v0.1 (MVP)**:
    *   基本的滚动和收集。
    *   基于关键词的简单安全过滤器。
    *   侧边栏仅支持“点赞”建议。
*   **v0.2**:
    *   带有草稿模板的回复功能。
    *   实现冷却时间和限制。
    *   配置用户界面。
*   **v0.3**:
    *   用于引用推文的高级 DOM 解析。
    *   增强的政治检测逻辑。

---

## 许可证

MIT